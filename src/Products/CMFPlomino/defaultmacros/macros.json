{
    "design": {
        "dbsettings": {
            "version": "2.0",
            "params": {
                "datetime_format": "%d %B %Y",
                "import_macros": [
                    "."
                ],
                "do_not_reindex": false,
                "start_page": null,
                "description": "",
                "indexInPortal": false,
                "title": "Macros",
                "exclude_from_nav": true,
                "ajax_include_head": null,
                "indexAttachments": false,
                "fulltextIndex": true,
                "do_not_list_users": false,
                "i18n": null,
                "debugMode": false,
                "isDatabaseTemplate": false,
                "ajax_load": null
            },
            "acl": {
                "AnomynousAccessRight": "NoAccess",
                "AuthenticatedAccessRight": "NoAccess",
                "UserRoles": {},
                "SpecificRights": {
                    "specific_deletedocument": "PlominoAuthor"
                }
            }
        },
        "resources": {},
        "template_text": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Text",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">text</span></p>\n<p><span class=\"plominoFieldClass\">text</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "text": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "text",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_text",
            "title": "Text"
        },
        "template_long_text": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Long text",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">long_text</span></p>\n<p><span class=\"plominoFieldClass\">long_text</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "long_text": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXTAREA",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": "10",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "long_text",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_long_text",
            "title": "Long text"
        },
        "template_checkbox": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Checkboxes",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">checkbox</span></p>\n<p><span class=\"plominoFieldClass\">checkbox</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "checkbox": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "CHECKBOX",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Option A|a",
                            "Option B|b",
                            "Option C|c"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "checkbox",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_checkbox",
            "title": "Checkboxes"
        },
        "template_radio": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Radio buttons",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">radio</span></p>\n<p><span class=\"plominoFieldClass\">radio</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "radio": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Option A|a",
                            "Option B|b",
                            "Option C|c"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "radio",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_radio",
            "title": "Radio buttons"
        },
        "template_dropdown": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Dropdown",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">dropdown</span></p>\n<p><span class=\"plominoFieldClass\">dropdown</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "dropdown": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Option A|a",
                            "Option B|b",
                            "Option C|c"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "dropdown",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_dropdown",
            "title": "Dropdown"
        },
        "template_single_checkbox": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Single checkbox",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoFieldClass\">single_checkbox</span><span class=\"plominoLabelClass\">single_checkbox</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "single_checkbox": {
                    "params": {
                        "read_template": null,
                        "field_type": "BOOLEAN",
                        "widget": "CHECKBOX",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "single_checkbox",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_single_checkbox",
            "title": "Single checkbox"
        },
        "template_integer": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Whole number",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">integer</span></p>\n<p><span class=\"plominoFieldClass\">integer</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "integer": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "integer",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_integer",
            "title": "Whole number"
        },
        "template_date": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Date",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">date</span></p>\n<p><span class=\"form-hint\">The date format has to be {date}/{month}/{year}. For example, 25 December 2010 is 25/12/2010.</span></p>\n<p><span class=\"plominoFieldClass\">date</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "date": {
                    "params": {
                        "read_template": null,
                        "field_type": "DATETIME",
                        "widget": "SERVER",
                        "startingyear": "1975",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": "%d/%m/%Y",
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "date",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_date",
            "title": "Date"
        },
        "template_email": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Email",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">email</span></p>\n<p> <span class=\"plominoFieldClass\">email</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "email": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "### START macro_condition_field_text_validate_email_1 ###\ndef macro_condition_field_text_validate_email_1():\n    \n    script_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\n    field_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\n    value = plominoContext.getItem(field_id)\n    return is_email(value)\n    \n\n### END macro_condition_field_text_validate_email_1 ###\r\n### START macro_field_validate_valid_1 ###\nif macro_condition_field_text_validate_email_1():\n    \n    return\n    \n\n### END macro_field_validate_valid_1 ###\r\n### START macro_field_validate_invalid_1 ###\n\nreturn '''This email address is not valid.'''\n\n### END macro_field_validate_invalid_1 ###",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_condition_field_text_validate_email",
                                    "_macro_id_": "macro_condition_field_text_validate_email_1",
                                    "formula": "\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\nvalue = plominoContext.getItem(field_id)\nreturn is_email(value)\n",
                                    "title": "Is email"
                                },
                                {
                                    "Form": "macro_field_validate_valid",
                                    "_macro_id_": "macro_field_validate_valid_1",
                                    "title": "Validate successful",
                                    "validation_formula": "\nreturn\n"
                                }
                            ],
                            [
                                {
                                    "Form": "macro_field_validate_invalid",
                                    "_macro_id_": "macro_field_validate_invalid_1",
                                    "invalid_message": "This email address is not valid.",
                                    "title": "Show invalid message - This email address is not valid.",
                                    "validation_formula": "\nreturn '''This email address is not valid.'''\n"
                                }
                            ]
                        ],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "email",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_email",
            "title": "Email"
        },
        "template_multi_selection": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Multi selection",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">multi_selection</span></p>\n<p><span class=\"plominoFieldClass\">multi_selection</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "multi_selection": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "MULTISELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Option A|a",
                            "Option B|b",
                            "Option C|c"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "multi_selection",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_multi_selection",
            "title": "Multi selection"
        },
        "template_rich_text": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Rich Text",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">rich_text</span></p>\n<p><span class=\"plominoFieldClass\">rich_text</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "rich_text": {
                    "params": {
                        "read_template": null,
                        "field_type": "RICHTEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "height": "10",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "rich_text",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_rich_text",
            "title": "Rich Text"
        },
        "template_file_attachment": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "File attachment",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">file_attachment</span></p>\n<p><span class=\"plominoFieldClass\">file_attachment</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "file_attachment": {
                    "params": {
                        "read_template": null,
                        "field_type": "ATTACHMENT",
                        "single_or_multiple": "SINGLE",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "file_attachment",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_file_attachment",
            "title": "File attachment"
        },
        "template_datagrid": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Datagrid",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">datagrid</span></p>\n<p><span class=\"plominoFieldClass\">datagrid</span>\n</p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "datagrid": {
                    "params": {
                        "read_template": null,
                        "field_type": "DATAGRID",
                        "widget": "REGULAR",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Untitled",
                        "edit_template": null,
                        "field_mapping": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "associated_form": null,
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "datagrid",
                    "title": "Untitled"
                }
            },
            "type": "PlominoForm",
            "id": "template_datagrid",
            "title": "Datagrid"
        },
        "macro_action_redirect": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Redirect in action",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">redirect_type</span></p>\n<p><span class=\"plominoFieldClass\">redirect_type</span></p>\n<p><span class=\"plominoHidewhenClass\">start:form_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">form_redirect</span></p>\n<p><span class=\"plominoFieldClass\">form_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:form_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:view_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">view_redirect</span></p>\n<p><span class=\"plominoFieldClass\">view_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:view_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:url_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">url_redirect</span></p>\n<p><span class=\"plominoFieldClass\">url_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:url_hidewhen</span></p>\n<p><span class=\"plominoFieldClass\">content</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "content": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Content",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nredirect_type_ = doc.getItem('redirect_type')\r\nform_redirect_ = doc.getItem('form_redirect')\r\nview_redirect_ = doc.getItem('view_redirect')\r\nurl_redirect_ = doc.getItem('url_redirect')\r\ncode = ''\r\nif redirect_type_ == 'form':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nform_redirect = \\\"\\\"\\\"{form_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), form_redirect)\r\nreturn targeturl\r\n    \"\"\".format(\r\n    form_redirect=form_redirect_\r\n)\r\nelif redirect_type_ == 'view':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nview_redirect = \\\"\\\"\\\"{view_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), view_redirect)\r\nreturn targeturl\r\n    \"\"\".format(\r\n    view_redirect=view_redirect_\r\n)\r\nelif redirect_type_ == 'url':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nurl_redirect = \\\"\\\"\\\"{url_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s' % url_redirect\r\nreturn targeturl\r\n    \"\"\".format(\r\n    url_redirect=url_redirect_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "content",
                    "title": "Content"
                },
                "form_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "Form hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in form ",
                                    "value_type": "text",
                                    "field_value": "form",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"form\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"form\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "form_hidewhen",
                    "title": "Form hidewhen"
                },
                "form_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Form redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Forms",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]",
                                "title": "Select from Forms"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_redirect",
                    "title": "Form redirect"
                },
                "redirect_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Redirect type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Form|form",
                            "View|view",
                            "URL|url"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "redirect_type",
                    "title": "Redirect type"
                },
                "url_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "URL hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in url ",
                                    "value_type": "text",
                                    "field_value": "url",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"url\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"url\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "url_hidewhen",
                    "title": "URL hidewhen"
                },
                "url_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "URL redirect",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "url_redirect",
                    "title": "URL redirect"
                },
                "view_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "View hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in view ",
                                    "value_type": "text",
                                    "field_value": "view",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"view\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"view\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "view_hidewhen",
                    "title": "View hidewhen"
                },
                "view_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "View redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Views",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]",
                                "title": "Select from Views"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "view_redirect",
                    "title": "View redirect"
                }
            },
            "type": "PlominoForm",
            "id": "macro_action_redirect",
            "title": "Redirect in action"
        },
        "macro_action_view_csv_download": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "CSV download",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>This will download the records from a view in CSV format. The action type should be <em>Redirect formula</em>.</p>\n<p><span class=\"plominoLabelClass\">view_redirect</span></p>\n<p><span class=\"plominoFieldClass\">view_redirect</span></p>\n<p> </p>\n<p><span class=\"plominoFieldClass\">content</span></p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "content": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Content",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "view_redirect_ = plominoContext.getItem('view_redirect')\r\ncode = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nlink = \"{{db_url}}/{{view_id}}/exportCSV?displayColumnsTitle=True&separator=%2C\".format(\r\n    db_url=db.absolute_url(),\r\n    view_id=\\\"\\\"\\\"{view_redirect}\\\"\\\"\\\")\r\nreturn link\r\n\"\"\".format(view_redirect=view_redirect_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "content",
                    "title": "Content"
                },
                "view_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Select view",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_field_selection_db_elements",
                                    "_macro_id_": "macro_field_selection_db_elements_1",
                                    "element_type": "Views",
                                    "include_other": null,
                                    "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = []\nfor f in editdb.getViews():\n    try:\n        if f.getPortalTypeName() == \"PlominoView\":\n            items.append(item(f))\n    except AttributeError:\n        continue\nreturn items\n",
                                    "title": "Select from Views"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = []\nfor f in editdb.getViews():\n    try:\n        if f.getPortalTypeName() == \"PlominoView\":\n            items.append(item(f))\n    except AttributeError:\n        continue\nreturn items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "view_redirect",
                    "title": "Select view"
                }
            },
            "type": "PlominoForm",
            "id": "macro_action_view_csv_download",
            "title": "CSV download from view"
        },
        "macro_condition_action": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Action matches",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p> </p>\n<p>Please select the action this condition to match:</p>\n<p><span class=\"plominoFieldClass\">action_id</span></p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "action_id": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "action_id",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "selectionlistformula": "\ndefaultitems = ['Select...|']\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return defaultitems # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = ['Save (save)|plomino_save','Close (close)|plomino_close']\nif editform:\n    for f, method_name in editform.getActions(hide=False):\n        try:\n            if f.getPortalTypeName() == \"PlominoAction\":\n                items.append(item(f))\n        except AttributeError:\n            continue\n    return items\nelif ctype == 'PlominoView':\n    for f, method_name in editcontext.getActions(hide=False):\n        try:\n            if f.getPortalTypeName() == \"PlominoAction\":\n                items.append(item(f))\n        except AttributeError:\n            continue\n    return items\nelse:\n    return []\n",
                                    "include_other": null,
                                    "Form": "macro_field_selection_db_elements",
                                    "title": "Select from Actions",
                                    "element_type": "Actions",
                                    "_macro_id_": "macro_field_selection_db_elements_1"
                                }
                            ]
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\ndefaultitems = ['Select...|']\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return defaultitems # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = ['Save (save)|plomino_save','Close (close)|plomino_close']\nif editform:\n    for f, method_name in editform.getActions(hide=False):\n        try:\n            if f.getPortalTypeName() == \"PlominoAction\":\n                items.append(item(f))\n        except AttributeError:\n            continue\n    return items\nelif ctype == 'PlominoView':\n    for f, method_name in editcontext.getActions(hide=False):\n        try:\n            if f.getPortalTypeName() == \"PlominoAction\":\n                items.append(item(f))\n        except AttributeError:\n            continue\n    return items\nelse:\n    return []\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "action_id",
                    "title": "action_id"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\naction_id_ = doc.getItem('action_id')\r\n\r\ncode = \"\"\"\r\naction_id = \\\"\\\"\\\"{action_id}\\\"\\\"\\\"\r\nrequest = plominoContext.REQUEST\r\nif request.get(action_id):\r\n    return True\r\nreturn False\r\n    \"\"\".format(\r\n        action_id=action_id_,\r\n    )\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_action",
            "title": "Action matches"
        },
        "macro_condition_field_datetime_between": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Is date in range",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoLabelClass\">min_option</span></p>\n<p><span class=\"plominoFieldClass\">min_option</span></p>\n<p><span class=\"plominoHidewhenClass\">start:min_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">min_datetime</span></p>\n<p><span class=\"form-hint\">Enter as date month year.</span></p>\n<p><span class=\"plominoFieldClass\">min_datetime</span></p>\n<p><span class=\"plominoHidewhenClass\">end:min_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">max_option</span></p>\n<p><span class=\"plominoFieldClass\">max_option</span></p>\n<p><span class=\"plominoHidewhenClass\">start:max_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">max_datetime</span></p>\n<p><span class=\"form-hint\">Enter as date month year.</span></p>\n<p><span class=\"plominoFieldClass\">max_datetime</span></p>\n<p><span class=\"plominoHidewhenClass\">end:max_hidewhen</span></p>\n<p><span class=\"plominoFieldClass\">formula</span></p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name', '')\r\nmin_option_ = doc.getItem('min_option', '')\r\nmax_option_ = doc.getItem('max_option', '')\r\nmin_datetime_ = doc.getItem('min_datetime')\r\nmax_datetime_ = doc.getItem('max_datetime')\r\nmin_datetime = ''\r\nif min_option_ == 'pick':\r\n    min_datetime = min_datetime_\r\n    if min_datetime and isinstance(min_datetime, basestring):\r\n        min_datetime = StringToDate(min_datetime)\r\n    if min_datetime:\r\n        min_datetime = DateToString(min_datetime, format='%d %b %Y')\r\nelif min_option_ == 'now':\r\n    min_datetime = 'past'\r\nmax_datetime = ''\r\nif max_option_ == 'pick':\r\n    max_datetime = max_datetime_\r\n    if max_datetime and isinstance(max_datetime, basestring):\r\n        max_datetime = StringToDate(max_datetime)\r\n    if max_datetime:\r\n        max_datetime = DateToString(max_datetime, format='%d %b %Y')\r\nelif max_option_ == 'now':\r\n    max_datetime = 'future'\r\nif min_datetime and not max_datetime:\r\n    return '{min_datetime} < {field_name}'.format(\r\n        min_datetime=min_datetime,\r\n        field_name=field_name_)\r\nelif max_datetime and not min_datetime:\r\n    return '{field_name} < {max_datetime}'.format(\r\n        max_datetime=max_datetime,\r\n        field_name=field_name_)\r\nelif min_datetime and max_datetime:\r\n    return '{min_datetime} < {field_name} < {max_datetime}'.format(\r\n        min_datetime=min_datetime,\r\n        max_datetime=max_datetime,\r\n        field_name=field_name_)\r\nelse:\r\n    return '{field_name} is any date'.format(\r\n        field_name=field_name_)",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_field_selection_db_elements",
                                    "_macro_id_": "macro_field_selection_db_elements_1",
                                    "element_type": "Fields",
                                    "include_other": true,
                                    "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n",
                                    "title": "Select from Fields"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Field name"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name', '')\r\nmin_option_ = doc.getItem('min_option', '')\r\nmax_option_ = doc.getItem('max_option', '')\r\nmin_datetime_ = doc.getItem('min_datetime')\r\nmax_datetime_ = doc.getItem('max_datetime')\r\ncode = \"\"\"\r\nfield_name = '{field_name}'\r\nif not plominoContext.hasItem(field_name):\r\n    return False\r\nfield_result = plominoContext.getItem(field_name)\r\nmin_option = '{min_option}'\r\nmax_option = '{max_option}'\r\nmin_datetime = ''\r\nif min_option == 'pick':\r\n    min_datetime = '{min_datetime}'\r\n    if min_datetime and isinstance(min_datetime, basestring):\r\n        min_datetime = StringToDate(min_datetime)\r\nelif min_option == 'now':\r\n    min_datetime = Now()\r\nmax_datetime = ''\r\nif max_option == 'pick':\r\n    max_datetime = '{max_datetime}'\r\n    if max_datetime and isinstance(max_datetime, basestring):\r\n        max_datetime = StringToDate(max_datetime)\r\nelif max_option == 'now':\r\n    max_datetime = Now()\r\nif min_datetime and not max_datetime:\r\n    return min_datetime < field_result\r\nelif max_datetime and not min_datetime:\r\n    return field_result < max_datetime\r\nelif min_datetime and max_datetime:\r\n    return field_result > min_datetime and field_result < max_datetime\r\nelse:\r\n    return True\r\n\"\"\".format(\r\n    field_name=field_name_,\r\n    min_option=min_option_,\r\n    max_option=max_option_,\r\n    min_datetime=min_datetime_,\r\n    max_datetime=max_datetime_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                },
                "max_datetime": {
                    "params": {
                        "read_template": null,
                        "field_type": "DATETIME",
                        "widget": "JQUERY",
                        "startingyear": "1900",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": "%d %B %Y",
                        "title": "Pick a maximum date",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "max_datetime",
                    "title": "Pick a maximum date"
                },
                "max_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "max_hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_condition_field_got_substring",
                                    "_macro_id_": "macro_condition_field_got_substring_1",
                                    "field_compare": "in",
                                    "field_name": "max_option",
                                    "field_value": "pick",
                                    "formula": "\nfield_name = \"\"\"max_option\"\"\"\nfield_value = \"\"\"pick\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "title": "\"max_option\" in pick ",
                                    "value_type": "text"
                                },
                                {
                                    "Form": "macro_hidewhen_show",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "formula": "\nreturn False\n",
                                    "title": "Show"
                                }
                            ],
                            [
                                {
                                    "Form": "macro_hidewhen_hide",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "formula": "\nreturn True\n",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"max_option\"\"\"\n    field_value = \"\"\"pick\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "max_hidewhen",
                    "title": "max_hidewhen"
                },
                "max_option": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Maximum date option",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Now (value is past)|now",
                            "Pick a date|pick",
                            "Any time in the past|any"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'pick'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "max_option",
                    "title": "Maximum date option"
                },
                "min_datetime": {
                    "params": {
                        "read_template": null,
                        "field_type": "DATETIME",
                        "widget": "JQUERY",
                        "startingyear": "1900",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": "%d %B %Y",
                        "title": "Pick a minimum date",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "min_datetime",
                    "title": "Pick a minimum date"
                },
                "min_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "min_hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_condition_field_got_substring",
                                    "_macro_id_": "macro_condition_field_got_substring_1",
                                    "field_compare": "in",
                                    "field_name": "min_option",
                                    "field_value": "pick",
                                    "formula": "\nfield_name = \"\"\"min_option\"\"\"\nfield_value = \"\"\"pick\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "title": "\"min_option\" in pick ",
                                    "value_type": "text"
                                },
                                {
                                    "Form": "macro_hidewhen_show",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "formula": "\nreturn False\n",
                                    "title": "Show"
                                }
                            ],
                            [
                                {
                                    "Form": "macro_hidewhen_hide",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "formula": "\nreturn True\n",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"min_option\"\"\"\n    field_value = \"\"\"pick\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "min_hidewhen",
                    "title": "min_hidewhen"
                },
                "min_option": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Minimum date option",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Now (value is future)|now",
                            "Pick a date|pick",
                            "Any time in the past|any"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'pick'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "min_option",
                    "title": "Minimum date option"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_field_datetime_between",
            "title": "Is date in range"
        },
        "macro_condition_field_got_substring": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Field contains text",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoLabelClass\">field_compare</span></p>\n<p><span class=\"plominoFieldClass\">field_compare</span></p>\n<p><span class=\"plominoLabelClass\">field_value</span></p>\n<p><span class=\"plominoFieldClass\">field_value</span></p>\n<p> </p>\n<p> </p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name', '')\r\nfield_compare_ = doc.getItem('field_compare', '')\r\nfield_value_ = doc.getItem('field_value', '')\r\nvalue_type_ = doc.getItem('value_type', '')\r\ncode = 'Field contains text'\r\n\r\nif not (field_name_ and field_compare_ and field_value_ and value_type_):\r\n    return code\r\n\r\nvalue_type = 'pattern'\r\nif value_type_ == 'text':\r\n    value_type = ''\r\ncode = '\"{field_name}\" {field_compare} {field_value} {value_type}'.format(\r\n    field_name=field_name_,\r\n    field_compare=field_compare_,\r\n    field_value=field_value_,\r\n    value_type=value_type\r\n)\r\nreturn code",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "field_compare": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Comparison",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Contains|in",
                            "Does not contain|not in"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_compare",
                    "title": "Comparison"
                },
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_field_selection_db_elements",
                                    "_macro_id_": "macro_field_selection_db_elements_1",
                                    "element_type": "Fields",
                                    "include_other": true,
                                    "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n",
                                    "title": "Select from Fields"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Field name"
                },
                "field_value": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field value",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_value",
                    "title": "Field value"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name', '')\r\nfield_compare_ = doc.getItem('field_compare', '')\r\nfield_value_ = doc.getItem('field_value', '')\r\ncode = \"\"\"\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\nfield_value = \\\"\\\"\\\"{field_value}\\\"\\\"\\\"\r\nif not plominoContext.hasItem(field_name):\r\n    return False\r\nfield_result = plominoContext.getItem(field_name)\r\nif field_name != 'Form':\r\n    form = plominoContext.getForm()\r\n    field = getattr(form, field_name)\r\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\r\n        field_result = form.computeFieldValue(field_name, plominoContext)\r\n    elif field.field_type == 'ATTACHMENT':\r\n        field_result = getattr(plominoContext.REQUEST.get(field_name),'filename','')\r\nresult = field_value {field_compare} str(field_result)\r\nreturn result\r\n    \"\"\".format(\r\n        field_name=field_name_,\r\n        field_compare=field_compare_,\r\n        field_value=field_value_\r\n    )\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_field_got_substring",
            "title": "Field contains text"
        },
        "macro_condition_field_text_validate_count": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Chars / words count",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">count_type</span></p>\n<p><span class=\"plominoFieldClass\">count_type</span></p>\n<p><span class=\"plominoLabelClass\">total_count</span></p>\n<p><span class=\"plominoFieldClass\">total_count</span></p>\n<p><span class=\"plominoLabelClass\">length_format</span></p>\n<p><span class=\"plominoFieldClass\">length_format</span></p>\n<span class=\"plominoFieldClass\">formula</span>\n<p> </p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "count_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Count type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Characters|chars",
                            "Words|words"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'chars'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "count_type",
                    "title": "Count type"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\ncount_type_ = doc.getItem('count_type')\r\ntotal_count_ = doc.getItem('total_count')\r\nlength_format_ = doc.getItem('length_format')\r\ndefault_code = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id)\r\n\"\"\"\r\nword_code = \"\"\"\r\nadjust_strs = []\r\nfor item in value:\r\n    if item.isalnum() or item.isspace():\r\n        adjust_strs.append(item)\r\n    else:\r\n        adjust_strs.append(' ')\r\nnew_strs = \"\".join(adjust_strs)\r\n\"\"\"\r\nif count_type_ == 'chars':\r\n    if length_format_ == 'fixed':\r\n        code = default_code + \"\"\"\r\nreturn len(value) == {total_count}\r\n        \"\"\".format(\r\n            total_count=total_count_\r\n        )\r\n    elif length_format_ == 'variable':\r\n        code = default_code + \"\"\"\r\nreturn len(value) < {total_count}\r\n        \"\"\".format(\r\n            total_count=total_count_\r\n        )\r\nelif count_type_ == 'words':\r\n    if length_format_ == 'fixed':\r\n        code = default_code + word_code + \"\"\"\r\nreturn len(new_strs.split()) == {total_count}\r\n        \"\"\".format(\r\n            total_count=total_count_\r\n        )\r\n    elif length_format_ == 'variable':\r\n        code = default_code + word_code + \"\"\"\r\nreturn len(new_strs.split()) < {total_count}\r\n        \"\"\".format(\r\n            total_count=total_count_\r\n        )\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                },
                "length_format": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Length format",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Fixed length|fixed",
                            "Variable length up to the total|variable"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "length_format",
                    "title": "Length format"
                },
                "total_count": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Total",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "total_count",
                    "title": "Total"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_field_text_validate_count",
            "title": "Chars / words count"
        },
        "macro_condition_field_text_validate_email": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Is email",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<span class=\"plominoFieldClass\">formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id)\r\nreturn is_email(value)\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_field_text_validate_email",
            "title": "Is email"
        },
        "macro_condition_number_range_in": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Number in range",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">less_field_name</span></p>\n<p><span class=\"plominoFieldClass\">less_field_name</span></p>\n<p><span class=\"plominoLabelClass\">less_field_value</span></p>\n<p><span class=\"plominoFieldClass\">less_field_value</span></p>\n<p><span class=\"plominoLabelClass\">and_or</span></p>\n<p><span class=\"plominoFieldClass\">and_or</span></p>\n<p><span class=\"plominoLabelClass\">more_field_name</span></p>\n<p><span class=\"plominoFieldClass\">more_field_name</span></p>\n<p><span class=\"plominoLabelClass\">more_field_value</span></p>\n<p><span class=\"plominoFieldClass\">more_field_value</span></p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "doc = plominoContext\r\nless_field_name_ = doc.getItem('less_field_name')\r\nless_field_value_ = doc.getItem('less_field_value', '')\r\nand_or_ = doc.getItem('and_or')\r\nmore_field_name_ = doc.getItem('more_field_name')\r\nmore_field_value_ = doc.getItem('more_field_value', '')\r\ncode = \"Number in range\"\r\n\r\nif less_field_value_ != '' and more_field_value_ == '':\r\n    code = \"\"\"{less_field_name} < {less_field_value}\"\"\".format(\r\n        less_field_name=less_field_name_,\r\n        less_field_value=less_field_value_\r\n    )\r\n    return code\r\n\r\nelif more_field_value_ != '' and less_field_value_ == '':\r\n    code = \"\"\"{more_field_name} > {more_field_value}\"\"\".format(\r\n        more_field_name=more_field_name_,\r\n        more_field_value=more_field_value_\r\n    )\r\n    return code\r\n    \r\nelse:\r\n    code = \"\"\"{less_field_name} < {less_field_value} {and_or} {more_field_name} > {more_field_value}\"\"\".format(\r\n        less_field_name=less_field_name_,\r\n        less_field_value=less_field_value_,\r\n        and_or=and_or_,\r\n        more_field_name=more_field_name_,\r\n        more_field_value=more_field_value_\r\n    )\r\n    return code\r\n\r\nreturn code",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "and_or": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Combination logic",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "And|and",
                            "Or|or"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "and_or",
                    "title": "Combination logic"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nless_field_name_ = doc.getItem('less_field_name')\r\nless_field_value_ = doc.getItem('less_field_value', '')\r\nand_or_ = doc.getItem('and_or')\r\nmore_field_name_ = doc.getItem('more_field_name')\r\nmore_field_value_ = doc.getItem('more_field_value', '')\r\nif less_field_value_ != '' and more_field_value_ == '':\r\n    code = \"\"\"\r\nless_field_name = \\\"\\\"\\\"{less_field_name}\\\"\\\"\\\"\r\nif not plominoContext.hasItem(less_field_name):\r\n    return False\r\nless_field_result = plominoContext.getItem(less_field_name)\r\nform = plominoContext.getForm()\r\nlf_field = getattr(form, less_field_name)\r\nif lf_field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\r\n    try:\r\n        less_field_result = float(form.computeFieldValue(less_field_name, plominoContext))\r\n    except ValueError:\r\n        less_field_result = 0\r\nresult = less_field_result < {less_field_value}\r\nreturn result\r\n    \"\"\".format(\r\n        less_field_name=less_field_name_,\r\n        less_field_value=less_field_value_\r\n    )\r\nelif more_field_value_ != '' and less_field_value_ == '':\r\n    code = \"\"\"\r\nmore_field_name = \\\"\\\"\\\"{more_field_name}\\\"\\\"\\\"\r\nif not plominoContext.hasItem(more_field_name):\r\n    return False\r\nmore_field_result = plominoContext.getItem(more_field_name)\r\nform = plominoContext.getForm()\r\nmf_field = getattr(form, more_field_name)\r\nif mf_field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\r\n    try:\r\n        more_field_result = float(form.computeFieldValue(more_field_name, plominoContext))\r\n    except ValueError:\r\n        more_field_result = 0\r\nresult = more_field_result > {more_field_value}\r\nreturn result\r\n    \"\"\".format(\r\n        more_field_name=more_field_name_,\r\n        more_field_value=more_field_value_\r\n    )\r\nelse:\r\n    code = \"\"\"\r\nless_field_name = \\\"\\\"\\\"{less_field_name}\\\"\\\"\\\"\r\nif not plominoContext.hasItem(less_field_name):\r\n    return False\r\nless_field_result = plominoContext.getItem(less_field_name)\r\nmore_field_name = \\\"\\\"\\\"{more_field_name}\\\"\\\"\\\"\r\nif not plominoContext.hasItem(more_field_name):\r\n    return False\r\nmore_field_result = plominoContext.getItem(more_field_name)\r\nform = plominoContext.getForm()\r\nlf_field = getattr(form, less_field_name)\r\nif lf_field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\r\n    try:\r\n        less_field_result = float(form.computeFieldValue(less_field_name, plominoContext))\r\n    except ValueError:\r\n        less_field_result = 0\r\nmf_field = getattr(form, more_field_name)\r\nif mf_field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\r\n    try:\r\n        more_field_result = float(form.computeFieldValue(more_field_name, plominoContext))\r\n    except ValueError:\r\n        more_field_result = 0\r\nresult = less_field_result < {less_field_value} {and_or} more_field_result > {more_field_value}\r\nreturn result\r\n    \"\"\".format(\r\n        less_field_name=less_field_name_,\r\n        less_field_value=less_field_value_,\r\n        and_or=and_or_,\r\n        more_field_name=more_field_name_,\r\n        more_field_value=more_field_value_\r\n    )\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                },
                "less_field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name for less than",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_field_selection_db_elements",
                                    "_macro_id_": "macro_field_selection_db_elements_1",
                                    "element_type": "Fields",
                                    "include_other": true,
                                    "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n",
                                    "title": "Select from Fields"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "less_field_name",
                    "title": "Field name for less than"
                },
                "less_field_value": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Less than this number",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "less_field_value",
                    "title": "Less than this number"
                },
                "more_field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name for greater than",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "Form": "macro_field_selection_db_elements",
                                    "_macro_id_": "macro_field_selection_db_elements_1",
                                    "element_type": "Fields",
                                    "include_other": true,
                                    "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n",
                                    "title": "Select from Fields"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\ndef get_fields(form_element, form_name):\n    field_items = []\n    for this_form in form_element.getFormFields():\n        try:\n            if this_form.getPortalTypeName() == \"PlominoField\":\n                field_items.append(item(this_form, form_name))\n        except AttributeError:\n            continue\n    return field_items\n\ncurrent_form_name = ''\ncurrent_form_items = ['Form ID|Form']\nif editform:\n    current_form_name = \"{title} ({id})\".format(\n        title=editform.Title(),\n        id=editform.id)\n    current_form_items = get_fields(editform, current_form_name)\n\nother_form_items = []\nfor other_form in editdb.getForms():\n    try:\n        if other_form.getPortalTypeName() == \"PlominoForm\":\n            other_form_name = \"{title} ({id})\".format(\n                title=other_form.Title(),\n                id=other_form.id)\n            if current_form_name != other_form_name:\n                other_form_items += get_fields(other_form, other_form_name)\n    except AttributeError:\n        continue\nreturn current_form_items + other_form_items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "more_field_name",
                    "title": "Field name for greater than"
                },
                "more_field_value": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Greater than this number",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "more_field_value",
                    "title": "Greater than this number"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_number_range_in",
            "title": "Number in range"
        },
        "macro_condition_validate_optional_field": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Is optional",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p> </p>\n<span class=\"plominoFieldClass\">formula</span>\n<p><br> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id, '')\r\nreturn value == ''\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_validate_optional_field",
            "title": "Is optional"
        },
        "macro_field_autofocus": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Set Autofocus",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Focus on this field.</p>\n<p><span class=\"discreet\">Note: If multiple fields have autofocus, autofocus will be given to the first field on the form.</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "html_attributes_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "html_attributes_formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "return \"\"\"return 'autofocus'\"\"\"",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "html_attributes_formula",
                    "title": "html_attributes_formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_autofocus",
            "title": "Set Autofocus"
        },
        "macro_field_datetime_now": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "DateTime Now",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<span class=\"plominoFieldClass\">formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"return Now()\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_datetime_now",
            "title": "DateTime Now"
        },
        "macro_field_display_sum": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Display total",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">fields_name</span></p>\n<p><span class=\"form-hint\">It will sum alll the number in the fields list and display on this field.</span></p>\n<p><span class=\"plominoFieldClass\">fields_name</span></p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "fields_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "MULTISELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Fields name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Fields",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]",
                                "title": "Select from Fields"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "fields_name",
                    "title": "Fields name"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfields_name_ = doc.getItem('fields_name', [])\r\ncode = \"\"\"\r\nfields = {fields_name}\r\ntotal = 0\r\nfor field in fields:\r\n    field_value = plominoContext.getItem(field, 0)\r\n    try:\r\n        total += float(field_value)\r\n    except ValueError:\r\n        continue\r\nreturn str(total)\r\n\"\"\".format(\r\n    fields_name=fields_name_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_display_sum",
            "title": "Display total"
        },
        "macro_field_number_between": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Validate number range",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">min</span></p>\n<p><span class=\"plominoFieldClass\">min</span></p>\n<p><span class=\"plominoLabelClass\">max</span></p>\n<p><span class=\"plominoFieldClass\">max</span></p>\n<p><span class=\"plominoLabelClass\">form_error_message</span></p>\n<p><span class=\"plominoFieldClass\">form_error_message</span></p>\n<p><span class=\"plominoFieldClass\">validation_formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "doc = plominoContext\r\nmin = doc.getItem(\"min\")\r\nmax = doc.getItem(\"max\")\r\nreturn \"Validate number between {min} and {max}\".format(min=min, max=max)",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "form_error_message": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Error message",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_error_message",
                    "title": "Error message"
                },
                "max": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Maximum",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "max",
                    "title": "Maximum"
                },
                "min": {
                    "params": {
                        "read_template": null,
                        "field_type": "NUMBER",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "format": null,
                        "title": "Minimum",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "number_type": "INTEGER",
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "min",
                    "title": "Minimum"
                },
                "validation_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "validation_formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nmin_ = doc.getItem('min', False)\r\nmax_ = doc.getItem('max', False)\r\nform_error_message_ = doc.getItem('form_error_message')\r\ncode = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id)\r\nmin_value = {min}\r\nmax_value = {max}\r\nform_error_message = \\\"\\\"\\\"{form_error_message}\\\"\\\"\\\"\r\nif min_value != False and max_value == False:\r\n    if value < min_value:\r\n        return form_error_message\r\nelif max_value != False and min_value == False:\r\n    if value > max_value:\r\n        return form_error_message\r\nelif min_value != False and max_value != False:\r\n    if value < min_value or value > max_value:\r\n        return form_error_message\r\n\"\"\".format(\r\n    min=min_,\r\n    max=max_,\r\n    form_error_message=form_error_message_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "validation_formula",
                    "title": "validation_formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_number_between",
            "title": "Validate number range"
        },
        "macro_field_prepopulate_fromuser": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Pre-populate field from user data",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Pre-populate the field with data from the currently logged in user.</p>\n<p><span class=\"plominoLabelClass\">data-source</span></p>\n<p><span class=\"plominoFieldClass\">data-source</span></p>\n<p><span class=\"plominoLabelClass\">field-name</span></p>\n<p><span class=\"plominoFieldClass\">field-name</span></p>\n<p><span class=\"plominoLabelClass\">value-if-empty</span></p>\n<p><span class=\"discreet\">If the field is empty, use the following value.</span></p>\n<p><span class=\"plominoFieldClass\">value-if-empty</span></p>\n<p><span class=\"plominoLabelClass\">value-if-anonymous</span></p>\n<p><span class=\"discreet\">If the user is anonymous, use the following value.</span></p>\n<p><span class=\"plominoFieldClass\">value-if-anonymous</span></p>\n<span class=\"plominoFieldClass\">formula</span>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "data-source": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Data source",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Plone Users|plone"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'plone'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "data-source",
                    "title": "Data source"
                },
                "field-name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [],
                        "selectionlistformula": "from Products.CMFCore.utils import getToolByName\r\ntool = getToolByName(plominoContext, 'portal_memberdata')\r\nids = tool.propertyIds()\r\nreturn [''] + ids",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field-name",
                    "title": "Field name"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "DEFAULT_DATA_SOURCE = 'plone'\r\n\r\nPLONE = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue_if_anonymous = \\\"\\\"\\\"{value_if_anonymous}\\\"\\\"\\\"\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\nvalue_if_empty = \\\"\\\"\\\"{value_if_empty}\\\"\\\"\\\"\r\n\r\nfrom Products.CMFCore.utils import getToolByName \r\nmt = getToolByName(plominoContext, 'portal_membership') \r\nif  mt.isAnonymousUser(): \r\n    return value_if_anonymous\r\n\r\nmember = mt.getAuthenticatedMember()\r\n\r\nvalue = member.getProperty(field_name)\r\nreturn value or value_if_empty\r\n\"\"\"\r\n\r\ndoc = plominoContext\r\ndata_source = doc.getItem('data-source', DEFAULT_DATA_SOURCE)\r\nfield_name = doc.getItem('field-name')\r\nvalue_if_empty = doc.getItem('value-if-empty', '')\r\nvalue_if_anonymous = doc.getItem('value-if-anonymous', '')\r\n\r\n# We only handle Plone as a data-source for now\r\nif data_source == 'plone':\r\n    code = PLONE.format(field_name=field_name, value_if_anonymous=value_if_anonymous, value_if_empty=value_if_empty)\r\nelse:\r\n    # We shouldn't get here\r\n    code = ''\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "formula"
                },
                "value-if-anonymous": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Value if anonymous",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "value-if-anonymous",
                    "title": "Value if anonymous"
                },
                "value-if-empty": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Value if empty",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "value-if-empty",
                    "title": "Value if empty"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_prepopulate_fromuser",
            "title": "Pre-populate field from user data"
        },
        "macro_field_required_selection": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Required field based on selection",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoLabelClass\">field_value</span></p>\n<p><span class=\"plominoFieldClass\">field_value</span></p>\n<p><span class=\"plominoLabelClass\">form_error_message</span></p>\n<p><span class=\"plominoFieldClass\">form_error_message</span></p>\n<p><span class=\"plominoFieldClass\">validation_formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Selection field name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Fields",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]",
                                "title": "Select from Fields"
                            }
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Selection field name"
                },
                "field_value": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Selection field value",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_value",
                    "title": "Selection field value"
                },
                "form_error_message": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Error message",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_error_message",
                    "title": "Error message"
                },
                "validation_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Validation formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name')\r\nfield_value_ = doc.getItem('field_value')\r\nform_error_message_ = doc.getItem('form_error_message')\r\ncode = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id, '')\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\nfield_value = \\\"\\\"\\\"{field_value}\\\"\\\"\\\"\r\nfield_result = plominoContext.getItem(field_name)\r\nif field_result == field_value and value == '':\r\n    return \\\"\\\"\\\"{form_error_message}\\\"\\\"\\\"\r\n\"\"\".format(\r\n    field_name=field_name_,\r\n    field_value=field_value_,\r\n    form_error_message=form_error_message_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "validation_formula",
                    "title": "Validation formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_required_selection",
            "title": "Required field based on selection"
        },
        "macro_field_select_fromuser": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Select user from user data",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">data-source</span></p>\n<p><span class=\"plominoFieldClass\">data-source</span></p>\n<p><span class=\"plominoLabelClass\">group-filter</span></p>\n<p><span class=\"discreet\">Only show users who are members of this group.</span></p>\n<p><span class=\"plominoFieldClass\">group-filter</span></p>\n<p><span class=\"plominoFieldClass\">selectionlistformula</span></p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "data-source": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Data source",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Plone Users|plone"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'plone'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "data-source",
                    "title": "Data source"
                },
                "group-filter": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Group filter",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "group-filter",
                    "title": "Group filter"
                },
                "selectionlistformula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "selectionlistformula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "DEFAULT_DATA_SOURCE = 'plone'\r\n\r\nPLONE = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\n\r\nfrom Products.CMFCore.utils import getToolByName \r\nmt = getToolByName(plominoContext, 'portal_membership')\r\nmembers = mt.listMembers()\r\nusers = ['|']\r\n# XXX: Filter by group: {group_filter}\r\nusers.extend(['%s|%s' % (member.getProperty('fullname'), member.getId()) for member in members])\r\nreturn users\r\n\"\"\"\r\n\r\ndoc = plominoContext\r\ndata_source = doc.getItem('data-source', DEFAULT_DATA_SOURCE)\r\ngroup_filter = doc.getItem('group-filter')\r\n\r\n# We only handle Plone as a data-source for now\r\nif data_source == 'plone':\r\n    code = PLONE.format(group_filter=group_filter)\r\nelse:\r\n    # We shouldn't get here\r\n    code = ''\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "selectionlistformula",
                    "title": "selectionlistformula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_select_fromuser",
            "title": "Select user from user data"
        },
        "macro_field_selection_db_elements": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Selection of elements from the current form/field",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Prepopulates the selection with elements in this form/field</p>\n<p><span class=\"plominoLabelClass\">element_type</span></p>\n<p><span class=\"plominoFieldClass\">element_type</span></p>\n<p><span class=\"plominoHidewhenClass\">start:include_other_hidewhen</span></p>\n<span class=\"plominoFieldClass\">include_other</span>\n<p><span class=\"plominoLabelClass\">include_other</span><br><br><span class=\"plominoHidewhenClass\">end:include_other_hidewhen</span></p>\n<p><span class=\"plominoFieldClass\">selectionlistformula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "type_ = plominoDocument.getItem('element_type')\r\nreturn 'Select from {type}'.format(type=type_)",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "element_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Type of element from the local form or field",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": null,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Forms",
                            "Fields",
                            "Views",
                            "Hidewhens",
                            "Actions"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "element_type",
                    "title": "Type of element from the local form or field"
                },
                "include_other": {
                    "params": {
                        "read_template": null,
                        "field_type": "BOOLEAN",
                        "widget": "CHECKBOX",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Include those from other forms",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "include_other",
                    "title": "Include those from other forms"
                },
                "include_other_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "include_other_hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"element_type\" in Fields ",
                                    "value_type": "text",
                                    "field_value": "Fields",
                                    "formula": "\nfield_name = \"\"\"element_type\"\"\"\nfield_value = \"\"\"Fields\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "element_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"element_type\"\"\"\n    field_value = \"\"\"Fields\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "include_other_hidewhen",
                    "title": "include_other_hidewhen"
                },
                "selectionlistformula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "selectionlistformula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "## START formula {\r\ndoc = plominoContext\r\ntype_ = doc.getItem('element_type')\r\ninclude_other_ = doc.getItem('include_other', False)\r\ncode = \"\"\"\r\ndefaultitems = ['Select...|']\r\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\r\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\r\nif editpath is None:\r\n    return defaultitems # we aren't being used in a popup\r\neditcontext = plominoContext.restrictedTraverse(editpath)\r\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\r\nctype = editcontext.getPortalTypeName()\r\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\r\neditform = None\r\nif ctype != 'PlominoView':\r\n    if ctype == 'PlominoForm':\r\n        editform = editcontext\r\n    else:\r\n        editform = editcontext.getParentNode()\r\neditdb = editcontext.getParentDatabase()\r\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\r\n\r\ndef item(elm, form_name=''):\r\n    if form_name:\r\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\r\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\r\n\"\"\"\r\n\r\nif type_ == 'Forms':\r\n    return code + \"\"\"\r\nitems = defaultitems\r\nfor f in editdb.getForms():\r\n    try:\r\n        if f.getPortalTypeName() == \"PlominoForm\":\r\n            items.append(item(f))\r\n    except AttributeError:\r\n        continue\r\nreturn items\r\n\"\"\"\r\nelif type_ == 'Views':\r\n    return code + \"\"\"\r\nitems = defaultitems\r\nfor f in editdb.getViews():\r\n    try:\r\n        if f.getPortalTypeName() == \"PlominoView\":\r\n            items.append(item(f))\r\n    except AttributeError:\r\n        continue\r\nreturn items\r\n\"\"\"\r\nelif type_ == 'Hidewhens':\r\n    return code + \"\"\"\r\nitems = defaultitems\r\nfor f in editform.getHidewhenFormulas():\r\n    try:\r\n        if f.getPortalTypeName() == \"PlominoHidewhen\":\r\n            items.append(item(f))\r\n    except AttributeError:\r\n        continue\r\nreturn items\r\n\"\"\"\r\nelif type_ == 'Actions':\r\n    return code + \"\"\"\r\nitems = ['Save (save)|plomino_save','Close (close)|plomino_close']\r\nif editform:\r\n    for f, method_name in editform.getActions(hide=False):\r\n        try:\r\n            if f.getPortalTypeName() == \"PlominoAction\":\r\n                items.append(item(f))\r\n        except AttributeError:\r\n            continue\r\n    return items\r\nelif ctype == 'PlominoView':\r\n    for f, method_name in editcontext.getActions(hide=False):\r\n        try:\r\n            if f.getPortalTypeName() == \"PlominoAction\":\r\n                items.append(item(f))\r\n        except AttributeError:\r\n            continue\r\n    return items\r\nelse:\r\n    return []\r\n\"\"\"\r\nelif type_ == 'Fields':\r\n    if include_other_:\r\n        return code + \"\"\"\r\ndef get_fields(form_element, form_name):\r\n    field_items = defaultitems\r\n    for this_form in form_element.getFormFields():\r\n        try:\r\n            if this_form.getPortalTypeName() == \"PlominoField\":\r\n                field_items.append(item(this_form, form_name))\r\n        except AttributeError:\r\n            continue\r\n    return field_items\r\n\r\ncurrent_form_name = ''\r\ncurrent_form_items = ['Form ID|Form']\r\nif editform:\r\n    current_form_name = \"{title} ({id})\".format(\r\n        title=editform.Title(),\r\n        id=editform.id)\r\n    current_form_items = get_fields(editform, current_form_name)\r\n\r\nother_form_items = []\r\nfor other_form in editdb.getForms():\r\n    try:\r\n        if other_form.getPortalTypeName() == \"PlominoForm\":\r\n            other_form_name = \"{title} ({id})\".format(\r\n                title=other_form.Title(),\r\n                id=other_form.id)\r\n            if current_form_name != other_form_name:\r\n                other_form_items += get_fields(other_form, other_form_name)\r\n    except AttributeError:\r\n        continue\r\nreturn current_form_items + other_form_items\r\n\"\"\"\r\n    else:\r\n        return code + \"\"\"\r\nitems = defaultitems\r\nfor f in editform.getFormFields():\r\n    try:\r\n        if f.getPortalTypeName() == \"PlominoField\":\r\n            items.append(item(f))\r\n    except AttributeError:\r\n        continue\r\nreturn items\r\n\"\"\"\r\nelse:\r\n    return code + 'return defaultitems'\r\n## END formula }",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "selectionlistformula",
                    "title": "selectionlistformula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_selection_db_elements",
            "title": "Selection of elements from the current form/field"
        },
        "macro_field_text_current_datetime": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Display current date",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Return the current date as text using the following format.</p>\n<p><span class=\"plominoLabelClass\">datetime_format</span></p>\n<span class=\"plominoFieldClass\">datetime_format</span>\n<p> </p>\n<span class=\"plominoFieldClass\">formula</span>\n<p><br><br></p>\n<p><br><br></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "datetime_format": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Datetime format",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "return '%Y-%m-%d'",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "datetime_format",
                    "title": "Datetime format"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\ndatetime_format_ = doc.getItem('datetime_format')\r\ncode = \"\"\"\r\ndatetime_format = \\\"\\\"\\\"{datetime_format}\\\"\\\"\\\"\r\nfrom DateTime import DateTime\r\nnow = DateTime()\r\nreturn DateToString(now, datetime_format)\r\n\"\"\".format(\r\n    datetime_format=datetime_format_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_text_current_datetime",
            "title": "Display current date"
        },
        "macro_field_text_display": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Display other field value",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoLabelClass\">datetime_format</span></p>\n<p><span class=\"form-hint\">This is optional. It is only needed when the field type is datetime and displays in different format.</span></p>\n<p><span class=\"plominoFieldClass\">datetime_format</span></p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "datetime_format": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Datetime format",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "datetime_format",
                    "title": "Datetime format"
                },
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Fields",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]",
                                "title": "Select from Fields"
                            }
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editform.getFormFields()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Field name"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name')\r\ndatetime_format_ = doc.getItem('datetime_format')\r\ncode = \"\"\"\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\ndatetime_format = \\\"\\\"\\\"{datetime_format}\\\"\\\"\\\"\r\nfield_result = plominoContext.getItem(field_name)\r\nresult = str(field_result)\r\nif datetime_format:\r\n    try:\r\n        result = DateToString(field_result, format=datetime_format)\r\n    except:\r\n        result = str(field_result)\r\nreturn result\r\n\"\"\".format(\r\n    field_name=field_name_,\r\n    datetime_format=datetime_format_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_text_display",
            "title": "Display other field value"
        },
        "macro_field_validate_invalid": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Invalid",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">invalid_message</span></p>\n<p><span class=\"plominoFieldClass\">invalid_message</span> <span class=\"plominoFieldClass\">validation_formula</span></p>\n<p><br><br></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "doc = plominoContext\r\ninvalid_message_ = doc.getItem('invalid_message')\r\ncode = \"\"\"Show invalid message - {invalid_message}\"\"\".format(invalid_message=invalid_message_)\r\nreturn code",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "invalid_message": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Invalid message",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "invalid_message",
                    "title": "Invalid message"
                },
                "validation_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Validation formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\ninvalid_message_ = doc.getItem('invalid_message')\r\ncode = \"\"\"\r\nreturn '''{invalid_message}'''\r\n\"\"\".format(invalid_message=invalid_message_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "validation_formula",
                    "title": "Validation formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_validate_invalid",
            "title": "Invalid"
        },
        "macro_field_validate_valid": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Valid",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<span class=\"plominoFieldClass\">validation_formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "return 'Validate successful'",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "validation_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Validation formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nreturn\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "validation_formula",
                    "title": "Validation formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_validate_valid",
            "title": "Valid"
        },
        "macro_form_add_author": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Add current site member as author",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>This macro will add this current log-in member that edit this form as the author.</p>\n<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">onsavedocument</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "return 'form_author'",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Field name"
                },
                "onsavedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "onSaveDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name')\r\ncode = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nmt = db.portal_membership\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\nif not mt.isAnonymousUser():\r\n    current_id = plominoContext.getCurrentUserId()\r\n    if current_id:\r\n        plominoContext.setItem(field_name, current_id)\r\n\"\"\".format(field_name=field_name_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "onsavedocument",
                    "title": "onSaveDocument"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_add_author",
            "title": "Add current site member as author"
        },
        "macro_form_add_saved_date": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Add saved date",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>This macro will add saved date to the document.</p>\n<p><span class=\"plominoLabelClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">field_name</span></p>\n<p><span class=\"plominoFieldClass\">onsavedocument</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "field_name": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Field name",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "return 'last_saved_date'",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "field_name",
                    "title": "Field name"
                },
                "onsavedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "onSaveDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nfield_name_ = doc.getItem('field_name')\r\ncode = \"\"\"\r\nfield_name = \\\"\\\"\\\"{field_name}\\\"\\\"\\\"\r\nplominoContext.setItem(field_name, Now())\r\n\"\"\".format(field_name=field_name_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "onsavedocument",
                    "title": "onSaveDocument"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_add_saved_date",
            "title": "Add saved date"
        },
        "macro_form_message": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Show message",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">message_type</span></p>\n<p><span class=\"plominoFieldClass\">message_type</span></p>\n<p><span class=\"plominoLabelClass\">message</span></p>\n<p><span class=\"plominoFieldClass\">message</span></p>\n<p><span class=\"plominoFieldClass\">onsavedocument</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "message": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Message",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "message",
                    "title": "Message"
                },
                "message_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Message type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Info|info",
                            "Error|error"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "message_type",
                    "title": "Message type"
                },
                "onsavedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "onSaveDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nmessage_type_ = doc.getItem('message_type')\r\nmessage_ = doc.getItem('message')\r\ncode = ''\r\nif message_type_ == 'info':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nmessage = \\\"\\\"\\\"{message}\\\"\\\"\\\"\r\ndb.writeMessageOnPage(message, req)\r\n    \"\"\".format(\r\n    message=message_\r\n)\r\nelif redirect_type_ == 'error':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nmessage = \\\"\\\"\\\"{message}\\\"\\\"\\\"\r\ndb.writeMessageOnPage(message, req, error=True)\r\n    \"\"\".format(\r\n    message=message_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "onsavedocument",
                    "title": "onSaveDocument"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_message",
            "title": "Show message"
        },
        "macro_form_redirect_onload": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Redirect in form on load",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">redirect_type</span></p>\n<p><span class=\"plominoFieldClass\">redirect_type</span></p>\n<p><span class=\"plominoHidewhenClass\">start:form_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">form_redirect</span></p>\n<p><span class=\"plominoFieldClass\">form_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:form_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:view_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">view_redirect</span></p>\n<p><span class=\"plominoFieldClass\">view_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:view_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:url_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">url_redirect</span></p>\n<p><span class=\"plominoFieldClass\">url_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:url_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">request_value</span></p>\n<p><span class=\"plominoFieldClass\">request_value</span></p>\n<p><span class=\"plominoFieldClass\">beforecreatedocument</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "beforecreatedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "beforeCreateDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nredirect_type_ = doc.getItem('redirect_type')\r\nform_redirect_ = doc.getItem('form_redirect')\r\nview_redirect_ = doc.getItem('view_redirect')\r\nurl_redirect_ = doc.getItem('url_redirect')\r\nrequest_value_ = doc.getItem('request_value')\r\ncode = ''\r\nif redirect_type_ == 'form':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nform_redirect = \\\"\\\"\\\"{form_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), form_redirect)\r\nif '{request_value}' in req:\r\n    req.RESPONSE.redirect(targeturl)\r\n    \"\"\".format(\r\n    form_redirect=form_redirect_,\r\n    request_value=request_value_\r\n)\r\nelif redirect_type_ == 'view':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nview_redirect = \\\"\\\"\\\"{view_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), view_redirect)\r\nif '{request_value}' in req:\r\n    req.RESPONSE.redirect(targeturl)\r\n    \"\"\".format(\r\n    view_redirect=view_redirect_,\r\n    request_value=request_value_\r\n)\r\nelif redirect_type_ == 'url':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nurl_redirect = \\\"\\\"\\\"{url_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s' % url_redirect\r\nif '{request_value}' in req:\r\n    req.RESPONSE.redirect(targeturl)\r\n    \"\"\".format(\r\n    url_redirect=url_redirect_,\r\n    request_value=request_value_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "beforecreatedocument",
                    "title": "beforeCreateDocument"
                },
                "form_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "Form hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in form ",
                                    "value_type": "text",
                                    "field_value": "form",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"form\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"form\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "form_hidewhen",
                    "title": "Form hidewhen"
                },
                "form_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Form redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Forms",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]",
                                "title": "Select from Forms"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_redirect",
                    "title": "Form redirect"
                },
                "redirect_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Redirect type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Form|form",
                            "View|view",
                            "URL|url"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "redirect_type",
                    "title": "Redirect type"
                },
                "request_value": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Submit button",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Actions",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f, method_name in editform.getActions(hide=False)]",
                                "title": "Select from Actions"
                            }
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f, method_name in editform.getActions(hide=False)]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "request_value",
                    "title": "Submit button"
                },
                "url_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "URL hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in url ",
                                    "value_type": "text",
                                    "field_value": "url",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"url\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"url\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "url_hidewhen",
                    "title": "URL hidewhen"
                },
                "url_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "URL redirect",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "url_redirect",
                    "title": "URL redirect"
                },
                "view_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "View hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in view ",
                                    "value_type": "text",
                                    "field_value": "view",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"view\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"view\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "view_hidewhen",
                    "title": "View hidewhen"
                },
                "view_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "View redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Views",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]",
                                "title": "Select from Views"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "view_redirect",
                    "title": "View redirect"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_redirect_onload",
            "title": "Redirect in form on load"
        },
        "macro_form_redirect_onsave": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Redirect in form on save",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">redirect_type</span></p>\n<p><span class=\"plominoFieldClass\">redirect_type</span></p>\n<p><span class=\"plominoHidewhenClass\">start:form_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">form_redirect</span></p>\n<p><span class=\"plominoFieldClass\">form_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:form_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:view_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">view_redirect</span></p>\n<p><span class=\"plominoFieldClass\">view_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:view_hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:url_hidewhen</span></p>\n<p><span class=\"plominoLabelClass\">url_redirect</span></p>\n<p><span class=\"plominoFieldClass\">url_redirect</span></p>\n<p><span class=\"plominoHidewhenClass\">end:url_hidewhen</span></p>\n<p><span class=\"plominoFieldClass\">onsavedocument</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "form_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "Form hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in form ",
                                    "value_type": "text",
                                    "field_value": "form",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"form\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"form\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "form_hidewhen",
                    "title": "Form hidewhen"
                },
                "form_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Form redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Forms",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]",
                                "title": "Select from Forms"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_redirect",
                    "title": "Form redirect"
                },
                "onsavedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "onSaveDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "doc = plominoContext\r\nredirect_type_ = doc.getItem('redirect_type')\r\nform_redirect_ = doc.getItem('form_redirect')\r\nview_redirect_ = doc.getItem('view_redirect')\r\nurl_redirect_ = doc.getItem('url_redirect')\r\ncode = ''\r\nif redirect_type_ == 'form':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nform_redirect = \\\"\\\"\\\"{form_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), form_redirect)\r\nreturn targeturl\r\n    \"\"\".format(\r\n    form_redirect=form_redirect_\r\n)\r\nelif redirect_type_ == 'view':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nview_redirect = \\\"\\\"\\\"{view_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s/%s' % (db.absolute_url(), view_redirect)\r\nreturn targeturl\r\n    \"\"\".format(\r\n    view_redirect=view_redirect_\r\n)\r\nelif redirect_type_ == 'url':\r\n    code = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nurl_redirect = \\\"\\\"\\\"{url_redirect}\\\"\\\"\\\"\r\ntargeturl = '%s' % url_redirect\r\nreturn targeturl\r\n    \"\"\".format(\r\n    url_redirect=url_redirect_\r\n)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "onsavedocument",
                    "title": "onSaveDocument"
                },
                "redirect_type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Redirect type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "Form|form",
                            "View|view",
                            "URL|url"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "redirect_type",
                    "title": "Redirect type"
                },
                "url_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "URL hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in url ",
                                    "value_type": "text",
                                    "field_value": "url",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"url\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"url\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "url_hidewhen",
                    "title": "URL hidewhen"
                },
                "url_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "URL redirect",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "url_redirect",
                    "title": "URL redirect"
                },
                "view_hidewhen": {
                    "params": {
                        "description": "",
                        "title": "View hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in view ",
                                    "value_type": "text",
                                    "field_value": "view",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"view\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "formula": "### START macro_condition_field_got_substring_1 ###\ndef macro_condition_field_got_substring_1():\n    \n    field_name = \"\"\"redirect_type\"\"\"\n    field_value = \"\"\"view\"\"\"\n    if not plominoContext.hasItem(field_name):\n        return False\n    field_result = plominoContext.getItem(field_name)\n    if field_name != 'Form':\n        form = plominoContext.getForm()\n        field = getattr(form, field_name)\n        if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n            field_result = form.computeFieldValue(field_name, plominoContext)\n    result = field_value in str(field_result)\n    return result\n        \n\n### END macro_condition_field_got_substring_1 ###\r\n### START macro_hidewhen_show_1 ###\nif macro_condition_field_got_substring_1():\n    \n    return False\n    \n\n### END macro_hidewhen_show_1 ###\r\n### START macro_hidewhen_hide_1 ###\n\nreturn True\n\n### END macro_hidewhen_hide_1 ###",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "view_hidewhen",
                    "title": "View hidewhen"
                },
                "view_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "View redirect",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Views",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]",
                                "title": "Select from Views"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "view_redirect",
                    "title": "View redirect"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_redirect_onsave",
            "title": "Redirect in form on save"
        },
        "macro_form_rest_submission": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "REST API Submission",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoLabelClass\">api-url</span></p>\n<p><span class=\"discreet\">Enter the URL of the REST API.</span></p>\n<p><span class=\"plominoFieldClass\">api-url</span></p>\n<p><span class=\"plominoLabelClass\">redirect-url</span></p>\n<p><span class=\"discreet\">Where to redirect users after they have submitted the form.</span></p>\n<span class=\"plominoFieldClass\">redirect-url</span>\n<p> </p>\n<p><span class=\"plominoLabelClass\">authentication-type</span></p>\n<p><span class=\"discreet\">If the REST API requires authentication, select the authentication type below.</span></p>\n<p><span class=\"plominoFieldClass\">authentication-type</span></p>\n<p><span class=\"plominoHidewhenClass\">start:auth-basic-hidewhen</span></p>\n<h4>Basic Authentication Settings</h4>\n<span class=\"plominoLabelClass\">auth-basic-username:Username</span>\n<p><span class=\"plominoFieldClass\">auth-basic-username</span></p>\n<span class=\"plominoLabelClass\">auth-basic-password:Password</span>\n<p><span class=\"plominoFieldClass\">auth-basic-password</span></p>\n<p><span class=\"plominoHidewhenClass\">end:auth-basic-hidewhen</span></p>\n<p><span class=\"plominoHidewhenClass\">start:auth-oauth2-hidewhen</span></p>\n<h4>OAuth2 Settings</h4>\n<span class=\"plominoLabelClass\">auth-oauth2-token:Auth Token</span>\n<p><span class=\"plominoFieldClass\">auth-oauth2-token</span></p>\n<span class=\"plominoLabelClass\">auth-oauth2-url:Auth URL</span>\n<p><span class=\"plominoFieldClass\">auth-oauth2-url</span></p>\n<p><span class=\"plominoHidewhenClass\">end:auth-oauth2-hidewhen</span></p>\n<p> </p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "api-url": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "API URL",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "api-url",
                    "title": "API URL"
                },
                "auth-basic-hidewhen": {
                    "params": {
                        "description": "",
                        "title": "Basic Auth Hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [],
                        "formula": "AUTH_TYPE = 'basic'\r\n#AUTH_TYPE = 'oauth2'\r\n\r\nauth_type = plominoContext.getItem('authentication-type')\r\nif auth_type == AUTH_TYPE:\r\n    return False\r\nreturn True",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "auth-basic-hidewhen",
                    "title": "Basic Auth Hidewhen"
                },
                "auth-basic-password": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Basic Auth Password",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "auth-basic-password",
                    "title": "Basic Auth Password"
                },
                "auth-basic-username": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Basic Auth Username",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "auth-basic-username",
                    "title": "Basic Auth Username"
                },
                "auth-oauth2-hidewhen": {
                    "params": {
                        "description": "",
                        "title": "OAuth2 Auth Hidewhen",
                        "ajax_include_head": null,
                        "isDynamicHidewhen": true,
                        "helpers": [],
                        "formula": "#AUTH_TYPE = 'basic'\r\nAUTH_TYPE = 'oauth2'\r\n\r\nauth_type = plominoContext.getItem('authentication-type')\r\nif auth_type == AUTH_TYPE:\r\n    return False\r\nreturn True",
                        "isResetOnHide": false,
                        "ajax_load": null,
                        "html_attributes_formula": ""
                    },
                    "type": "PlominoHidewhen",
                    "id": "auth-oauth2-hidewhen",
                    "title": "OAuth2 Auth Hidewhen"
                },
                "auth-oauth2-token": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "OAuth2 Auth Token",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "auth-oauth2-token",
                    "title": "OAuth2 Auth Token"
                },
                "auth-oauth2-url": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "OAuth2 Auth URL",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "auth-oauth2-url",
                    "title": "OAuth2 Auth URL"
                },
                "authentication-type": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "RADIO",
                        "mandatory": true,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Authentication Type",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": [
                            "None|none",
                            "Basic Authentication|basic",
                            "OAuth2|oauth2"
                        ],
                        "helpers": [],
                        "selectionlistformula": "",
                        "formula": "return 'none'",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "authentication-type",
                    "title": "Authentication Type"
                },
                "redirect-url": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Redirect URL",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "redirect-url",
                    "title": "Redirect URL"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_rest_submission",
            "title": "REST API Submission"
        },
        "macro_hidewhen_hide": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Hide",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<span class=\"plominoFieldClass\">formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nreturn True\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_hidewhen_hide",
            "title": "Hide"
        },
        "macro_hidewhen_show": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Show",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<span class=\"plominoFieldClass\">formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nreturn False\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_hidewhen_show",
            "title": "Show"
        },
        "macro_view_exclude": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Exclude",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Combine this with an \"if\" macro to exclude those documents that match from your View</p>\n<span class=\"plominoFieldClass\">selection_formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "selection_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Selection Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nreturn False\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "selection_formula",
                    "title": "Selection Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_view_exclude",
            "title": "Exclude"
        },
        "macro_view_include": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Include",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>Combine this with an \"if\" macro to include those documents that match from your View</p>\n<span class=\"plominoFieldClass\">selection_formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "selection_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Selection Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nreturn True\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "selection_formula",
                    "title": "Selection Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_view_include",
            "title": "Include"
        },
        "macro_view_select_view_form": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Select form to display",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p> </p>\n<p><span class=\"plominoFieldClass\">formlist</span></p>\n<p><br><br><br></p>\n<span class=\"plominoFieldClass\">form_formula</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formlist": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Select form to display",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Forms",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]",
                                "title": "Select from Forms"
                            }
                        ],
                        "selectionlistformula": "\n### START macro_field_selection_db_elements_1 ###\n\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formlist",
                    "title": "Select form to display"
                },
                "form_formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "formId = plominoDocument.getItem(\"formlist\", \"\")\r\ncode = \"\"\"\r\nreturn '%s' \r\n\"\"\" % formId\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "form_formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_view_select_view_form",
            "title": "Select form to display"
        },
        "macro_condition_field_empty": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "No value",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p><span class=\"plominoFieldClass\">formula</span></p>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "code = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nvalue = plominoContext.getItem(field_id)\r\nreturn value is None or value is False or (isinstance(value, basestring) and len(value.strip())==0)\r\n\"\"\"\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_condition_field_empty",
            "title": "No value"
        },
        "macro_field_default_value": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "Default value",
                "onSaveDocument": "",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<div class=\"plominoGroupClass\" data-groupid=\"defaultvalue\">\n<p><span class=\"plominoLabelClass\">defaultvalue</span></p>\n<p><span class=\"plominoFieldClass\">defaultvalue</span></p>\n</div>\n<p> </p>\n<p><span class=\"plominoFieldClass\">formula</span></p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "defaultvalue": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "TEXT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Default value",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "defaultvalue",
                    "title": "Default value"
                },
                "formula": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Formula",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "defaultvalue = plominoContext.getItem('defaultvalue','')\r\ncode = \"\"\"\r\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\r\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\r\nif not plominoContext.getItem(field_id):\r\n    return '{defaultvalue}'\r\nreturn plominoContext.getItem(field_id)\r\n\"\"\" .format(defaultvalue=defaultvalue)\r\n\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "formula",
                    "title": "Formula"
                }
            },
            "type": "PlominoForm",
            "id": "macro_field_default_value",
            "title": "Default value"
        },
        "macro_form_csv_download": {
            "params": {
                "onCreateDocument": "",
                "resources_css": null,
                "ajax_include_head": null,
                "onOpenDocument": "",
                "ajax_load": null,
                "onDeleteDocument": "",
                "title": "CSV download",
                "onSaveDocument": "view_redirect_ = plominoContext.getItem('view_redirect')\r\ncode = \"\"\"\r\ndb = plominoContext.getParentDatabase()\r\nreq = getattr(plominoContext, 'REQUEST')\r\nlink = \"{{db_url}}/{{view_id}}/exportCSV?displayColumnsTitle=True&separator=%2C\".format(\r\n    db_url=db.absolute_url(),\r\n    view_id=\\\"\\\"\\\"{view_redirect}\\\"\\\"\\\")\r\nreq.RESPONSE.redirect(link)\r\n\"\"\".format(view_redirect=view_redirect_)\r\nplominoDocument.setItem('onDisplay', code)",
                "onDisplay": "",
                "resources_js": null,
                "form_method": "Auto",
                "document_id": "",
                "form_layout": "<p>This will download the records from a view in CSV format. The action type should be <em>Redirect formula</em>.</p>\n<p><span class=\"plominoLabelClass\">view_redirect</span></p>\n<p><span class=\"plominoFieldClass\">view_redirect</span></p>\n<span class=\"plominoFieldClass\">beforecreatedocument</span>\n<span class=\"plominoFieldClass\">onsavedocument</span>\n<p> </p>",
                "description": "",
                "isPage": false,
                "store_dynamic_document_title": false,
                "isSearchForm": false,
                "beforeCreateDocument": "",
                "hide_default_actions": false,
                "document_title": "",
                "search_formula": "",
                "search_view": null,
                "beforeSaveDocument": "",
                "dynamic_document_title": false,
                "helpers": [],
                "onSearch": ""
            },
            "elements": {
                "view_redirect": {
                    "params": {
                        "read_template": null,
                        "field_type": "SELECTION",
                        "widget": "SELECT",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "Select view",
                        "separator": null,
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "EDITABLE",
                        "to_be_indexed": false,
                        "selectionlist": null,
                        "helpers": [
                            [
                                {
                                    "selectionlistformula": "\ndefaultitems = ['Select...|']\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return defaultitems # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = defaultitems\nfor f in editdb.getViews():\n    try:\n        if f.getPortalTypeName() == \"PlominoView\":\n            items.append(item(f))\n    except AttributeError:\n        continue\nreturn items\n",
                                    "include_other": null,
                                    "Form": "macro_field_selection_db_elements",
                                    "title": "Select from Views",
                                    "element_type": "Views",
                                    "_macro_id_": "macro_field_selection_db_elements_1"
                                }
                            ]
                        ],
                        "selectionlistformula": "### START macro_field_selection_db_elements_1 ###\n\ndefaultitems = ['Select...|']\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return defaultitems # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = None\nif ctype != 'PlominoView':\n    if ctype == 'PlominoForm':\n        editform = editcontext\n    else:\n        editform = editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm, form_name=''):\n    if form_name:\n        return '{title} ({id}) from form: {form_name}|{id}'.format(id=elm.id, title=elm.Title(), form_name=form_name)\n    return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\n\nitems = defaultitems\nfor f in editdb.getViews():\n    try:\n        if f.getPortalTypeName() == \"PlominoView\":\n            items.append(item(f))\n    except AttributeError:\n        continue\nreturn items\n\n### END macro_field_selection_db_elements_1 ###",
                        "formula": "",
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "view_redirect",
                    "title": "Select view"
                },
                "beforecreatedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "beforeCreateDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "view_redirect_ = plominoContext.getItem('view_redirect')\r\ncode = \"\"\"\r\nif plominoContext.isPage:\r\n    db = plominoContext.getParentDatabase()\r\n    req = getattr(plominoContext, 'REQUEST')\r\n    link = \"{{db_url}}/{{view_id}}/exportCSV?displayColumnsTitle=True&separator=%2C\".format(\r\n        db_url=db.absolute_url(),\r\n        view_id=\\\"\\\"\\\"{view_redirect}\\\"\\\"\\\")\r\n    req.RESPONSE.redirect(link)\r\n\"\"\".format(view_redirect=view_redirect_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "beforecreatedocument",
                    "title": "beforeCreateDocument"
                },
                "onsavedocument": {
                    "params": {
                        "read_template": null,
                        "field_type": "TEXT",
                        "widget": "HIDDEN",
                        "mandatory": false,
                        "html_attributes_formula": "",
                        "index_type": "DEFAULT",
                        "validation_formula": "",
                        "ajax_include_head": null,
                        "title": "onSaveDocument",
                        "edit_template": null,
                        "isDynamicField": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "to_be_indexed": false,
                        "helpers": [],
                        "preserve_carriage_returns": false,
                        "formula": "view_redirect_ = plominoContext.getItem('view_redirect')\r\ncode = \"\"\"\r\nif not plominoContext.getForm().isPage:\r\n    db = plominoContext.getParentDatabase()\r\n    req = getattr(plominoContext, 'REQUEST')\r\n    link = \"{{db_url}}/{{view_id}}/exportCSV?displayColumnsTitle=True&separator=%2C\".format(\r\n        db_url=db.absolute_url(),\r\n        view_id=\\\"\\\"\\\"{view_redirect}\\\"\\\"\\\")\r\n    req.set('plominoredirecturl', link)\r\n\"\"\".format(view_redirect=view_redirect_)\r\nreturn code",
                        "size": null,
                        "ajax_load": null,
                        "description": ""
                    },
                    "type": "PlominoField",
                    "id": "onsavedocument",
                    "title": "onSaveDocument"
                }
            },
            "type": "PlominoForm",
            "id": "macro_form_csv_download",
            "title": "CSV download"
        }
    },
    "id": "macros"
}