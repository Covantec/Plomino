{
    "design": {
        "resources": {},
        "macro_form_redirect_onsave": {
            "id": "macro_form_redirect_onsave",
            "type": "PlominoForm",
            "title": "Redirect in form on save",
            "params": {
                "form_method": "Auto",
                "dynamic_document_title": false,
                "store_dynamic_document_title": false,
                "hide_default_actions": false,
                "isPage": false,
                "isSearchForm": false,
                "search_view": null,
                "resources_js": null,
                "resources_css": null,
                "title": "Redirect in form on save",
                "description": "",
                "helpers": [],
                "ajax_load": null,
                "ajax_include_head": null
            },
            "elements": {
                "form_hidewhen": {
                    "id": "form_hidewhen",
                    "type": "PlominoHidewhen",
                    "title": "Form hidewhen",
                    "params": {
                        "isDynamicHidewhen": true,
                        "isResetOnHide": false,
                        "title": "Form hidewhen",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in form ",
                                    "value_type": "text",
                                    "field_value": "form",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"form\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                },
                "form_redirect": {
                    "id": "form_redirect",
                    "type": "PlominoField",
                    "title": "Form redirect",
                    "params": {
                        "field_type": "SELECTION",
                        "mandatory": false,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "Form redirect",
                        "description": "",
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Forms",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getForms()]",
                                "title": "Select from Forms"
                            }
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "SELECT",
                        "selectionlist": null,
                        "separator": null
                    }
                },
                "onsavedocument": {
                    "id": "onsavedocument",
                    "type": "PlominoField",
                    "title": "onSaveDocument",
                    "params": {
                        "field_type": "TEXT",
                        "mandatory": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "onSaveDocument",
                        "description": "",
                        "helpers": null,
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "HIDDEN",
                        "size": null,
                        "preserve_carriage_returns": false
                    }
                },
                "redirect_type": {
                    "id": "redirect_type",
                    "type": "PlominoField",
                    "title": "Redirect type",
                    "params": {
                        "field_type": "SELECTION",
                        "mandatory": true,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "Redirect type",
                        "description": "",
                        "helpers": null,
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "RADIO",
                        "selectionlist": [
                            "Form|form",
                            "View|view",
                            "URL|url"
                        ],
                        "separator": null
                    }
                },
                "url_hidewhen": {
                    "id": "url_hidewhen",
                    "type": "PlominoHidewhen",
                    "title": "URL hidewhen",
                    "params": {
                        "isDynamicHidewhen": true,
                        "isResetOnHide": false,
                        "title": "URL hidewhen",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in url ",
                                    "value_type": "text",
                                    "field_value": "url",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"url\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                },
                "url_redirect": {
                    "id": "url_redirect",
                    "type": "PlominoField",
                    "title": "URL redirect",
                    "params": {
                        "field_type": "TEXT",
                        "mandatory": false,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "URL redirect",
                        "description": "",
                        "helpers": null,
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "TEXT",
                        "size": null,
                        "preserve_carriage_returns": false
                    }
                },
                "view_hidewhen": {
                    "id": "view_hidewhen",
                    "type": "PlominoHidewhen",
                    "title": "View hidewhen",
                    "params": {
                        "isDynamicHidewhen": true,
                        "isResetOnHide": false,
                        "title": "View hidewhen",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_1",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"redirect_type\" in view ",
                                    "value_type": "text",
                                    "field_value": "view",
                                    "formula": "\nfield_name = \"\"\"redirect_type\"\"\"\nfield_value = \"\"\"view\"\"\"\nif not plominoContext.hasItem(field_name):\n    return False\nfield_result = plominoContext.getItem(field_name)\nif field_name != 'Form':\n    form = plominoContext.getForm()\n    field = getattr(form, field_name)\n    if field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n        field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "redirect_type",
                                    "_macro_id_": "macro_condition_field_got_substring_1"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_1",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                },
                "view_redirect": {
                    "id": "view_redirect",
                    "type": "PlominoField",
                    "title": "View redirect",
                    "params": {
                        "field_type": "SELECTION",
                        "mandatory": false,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "View redirect",
                        "description": "",
                        "helpers": [
                            {
                                "Form": "macro_field_selection_db_elements",
                                "_macro_id_": "macro_field_selection_db_elements_1",
                                "element_type": "Views",
                                "selectionlistformula": "\neditpath = plominoContext.REQUEST.get('Plomino_Macro_Context')\nLog('editpath %s' % editpath, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nif editpath is None:\n    return [] # we aren't being used in a popup\neditcontext = plominoContext.restrictedTraverse(editpath)\nLog('editcontext %s' % editcontext, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\nctype = editcontext.getPortalTypeName()\nLog('ctype %s' % ctype, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\neditform = editcontext if ctype == 'PlominoForm' else editcontext.getParentNode()\neditdb = editcontext.getParentDatabase()\nLog('editdb %s' % editdb, 'macro_field_selection_db_elements/selectionlistformula', severity='debug')\n\ndef item(elm):\n  return '{title} ({id})|{id}'.format(id=elm.id, title=elm.Title())\nreturn [item(f) for f in editdb.getViews()]",
                                "title": "Select from Views"
                            }
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "SELECT",
                        "selectionlist": [],
                        "separator": null
                    }
                },
                "retain_form_data": {
                    "id": "retain_form_data",
                    "type": "PlominoField",
                    "title": "Retain form data in target form",
                    "params": {
                        "field_type": "BOOLEAN",
                        "mandatory": false,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "Retain form data in target form",
                        "description": "",
                        "helpers": [],
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "CHECKBOX"
                    }
                },
                "redirect_on_save_hidewhen": {
                    "id": "redirect_on_save_hidewhen",
                    "type": "PlominoHidewhen",
                    "title": "defaultHidewhen",
                    "params": {
                        "isDynamicHidewhen": true,
                        "isResetOnHide": false,
                        "title": "defaultHidewhen",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_2",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"only_redirect_on_save\" in Tru...",
                                    "value_type": "text",
                                    "field_value": "True",
                                    "formula": "\nfield_name = \"\"\"only_redirect_on_save\"\"\"\nif field_name =='@@CURRENT_FIELD':\n    script_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\n    field_name, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\nfield_value = \"\"\"True\"\"\"\nfield_result = plominoContext.getItem(field_name)\nform = plominoContext.getForm()\nfield = getattr(form, field_name)\nif field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n    field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value in str(field_result)\nreturn result\n    ",
                                    "field_name": "only_redirect_on_save",
                                    "_macro_id_": "macro_condition_field_got_substring_2"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_2",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                },
                "ondisplay": {
                    "id": "ondisplay",
                    "type": "PlominoField",
                    "title": "onDisplay",
                    "params": {
                        "field_type": "TEXT",
                        "mandatory": false,
                        "field_mode": "COMPUTEDONSAVE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "onDisplay",
                        "description": "",
                        "helpers": [],
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "HIDDEN",
                        "size": null,
                        "preserve_carriage_returns": false
                    }
                },
                "only_redirect_on_save": {
                    "id": "only_redirect_on_save",
                    "type": "PlominoField",
                    "title": "Only Redirect On Save",
                    "params": {
                        "field_type": "BOOLEAN",
                        "mandatory": false,
                        "field_mode": "EDITABLE",
                        "isDynamicField": false,
                        "to_be_indexed": false,
                        "index_type": "DEFAULT",
                        "read_template": null,
                        "edit_template": null,
                        "title": "Only Redirect On Save",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nscript_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\nfield_id, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\nif not plominoContext.getItem(field_id):\n    return 'True'\nreturn plominoContext.getItem(field_id)\n",
                                    "defaultvalue": "True",
                                    "_macro_id_": "macro_field_default_value_2",
                                    "Form": "macro_field_default_value",
                                    "title": "Default value"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null,
                        "widget": "CHECKBOX"
                    }
                },
                "not_redirect_on_save_defaulthidewhen": {
                    "id": "not_redirect_on_save_defaulthidewhen",
                    "type": "PlominoHidewhen",
                    "title": "defaultHidewhen",
                    "params": {
                        "isDynamicHidewhen": true,
                        "isResetOnHide": false,
                        "title": "defaultHidewhen",
                        "description": "",
                        "helpers": [
                            [
                                {
                                    "formula": "\nreturn False\n",
                                    "_macro_id_": "macro_hidewhen_show_2",
                                    "Form": "macro_hidewhen_show",
                                    "title": "Show"
                                },
                                {
                                    "field_compare": "not in",
                                    "Form": "macro_condition_field_got_substring",
                                    "title": "\"only_redirect_on_save\" not in...",
                                    "value_type": "text",
                                    "field_value": "True",
                                    "formula": "\nfield_name = \"\"\"only_redirect_on_save\"\"\"\nif field_name =='@@CURRENT_FIELD':\n    script_type, form_id, rest = script_id.split(SCRIPT_ID_DELIMITER, 2)\n    field_name, formula = rest.rsplit(SCRIPT_ID_DELIMITER, 1)\nfield_value = \"\"\"True\"\"\"\nfield_result = plominoContext.getItem(field_name)\nform = plominoContext.getForm()\nfield = getattr(form, field_name)\nif field.field_mode in [\"COMPUTED\",\"COMPUTEDONSAVE\"]:\n    field_result = form.computeFieldValue(field_name, plominoContext)\nresult = field_value not in str(field_result)\nreturn result\n    ",
                                    "field_name": "only_redirect_on_save",
                                    "_macro_id_": "macro_condition_field_got_substring_2"
                                }
                            ],
                            [
                                {
                                    "formula": "\nreturn True\n",
                                    "_macro_id_": "macro_hidewhen_hide_2",
                                    "Form": "macro_hidewhen_hide",
                                    "title": "Hide"
                                }
                            ]
                        ],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                },
                "page_form_defaulthidewhen": {
                    "id": "page_form_defaulthidewhen",
                    "type": "PlominoHidewhen",
                    "title": "defaultHidewhen",
                    "params": {
                        "isDynamicHidewhen": false,
                        "isResetOnHide": false,
                        "title": "defaultHidewhen",
                        "description": "",
                        "helpers": [],
                        "ajax_load": null,
                        "ajax_include_head": null
                    }
                }
            }
        }
    },
    "id": "macros"
}